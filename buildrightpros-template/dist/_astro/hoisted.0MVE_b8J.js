const P={contractor:{bg:"#F9F7F4",dark:"#1a1a1a",section:"#1a1a1a",text:"#444444",accent:"#FF6B35"},professional:{bg:"#F9F7F4",dark:"#1a1a1a",section:"#2D3748",text:"#444444",accent:"#3B82F6"},earth:{bg:"#FAF8F5",dark:"#2C1810",section:"#5C4033",text:"#3E3028",accent:"#8B6914"},green:{bg:"#F5FAF5",dark:"#1B3A1B",section:"#2D5A2D",text:"#2D3B2D",accent:"#22C55E"},dark:{bg:"#F7F7F7",dark:"#111111",section:"#333333",text:"#333333",accent:"#E11D48"}},x=[{name:"Plumber",tagline:"Reliable plumbing you can trust",services:["Pipe Repair","Drain Cleaning","Water Heater Install","Leak Detection"]},{name:"Electrician",tagline:"Safe, certified electrical work",services:["Panel Upgrades","Rewiring","Lighting","Code Compliance"]},{name:"HVAC",tagline:"Comfort in every season",services:["AC Repair","Furnace Install","Duct Cleaning","Maintenance Plans"]},{name:"Roofer",tagline:"Protection from the top down",services:["Roof Repair","Full Replacement","Storm Damage","Inspections"]},{name:"General Contractor",tagline:"Building your vision",services:["Remodeling","Additions","New Construction","Project Management"]},{name:"Painter",tagline:"Color that transforms spaces",services:["Interior Painting","Exterior Painting","Cabinet Refinishing","Drywall Repair"]},{name:"Landscaper",tagline:"Outdoor spaces that impress",services:["Lawn Care","Hardscaping","Tree Service","Irrigation"]},{name:"Pool Cleaner",tagline:"Crystal clear, every time",services:["Weekly Cleaning","Equipment Repair","Acid Wash","Filter Service"]},{name:"Fence Builder",tagline:"Security and curb appeal",services:["Wood Fencing","Metal Fencing","Gate Install","Fence Repair"]},{name:"Concrete",tagline:"Strong foundations, clean finishes",services:["Driveways","Patios","Foundation Repair","Stamped Concrete"]},{name:"Flooring",tagline:"Beautiful floors, built to last",services:["Hardwood","Tile","LVP Install","Floor Refinishing"]},{name:"Pest Control",tagline:"Your home, pest-free",services:["Termite Treatment","Rodent Control","Mosquito Spray","Inspections"]},{name:"Garage Door",tagline:"Smooth operation guaranteed",services:["Spring Repair","Opener Install","New Doors","Maintenance"]},{name:"Pressure Washing",tagline:"Restore your property's shine",services:["House Wash","Driveway Clean","Deck Restore","Commercial"]},{name:"Junk Removal",tagline:"Clear space, clear mind",services:["Residential Haul","Construction Debris","Estate Cleanout","Appliance Removal"]},{name:"Handyman",tagline:"Fix it right the first time",services:["Repairs","Assembly","Drywall","Odd Jobs"]},{name:"Locksmith",tagline:"Security you can count on",services:["Lockouts","Rekeying","Lock Install","Smart Locks"]},{name:"Septic",tagline:"Underground expertise",services:["Pumping","Inspections","Repairs","New Install"]},{name:"Window Cleaning",tagline:"See the world clearly",services:["Residential","Commercial","Screen Cleaning","Hard Water Removal"]},{name:"Solar",tagline:"Power your savings",services:["Panel Install","System Design","Battery Storage","Maintenance"]},{name:"Insulation",tagline:"Comfort and efficiency",services:["Spray Foam","Blown-In","Batt Install","Energy Audits"]},{name:"Demolition",tagline:"Out with the old",services:["Interior Demo","Structural Demo","Site Clearing","Debris Removal"]},{name:"Welding",tagline:"Precision metal work",services:["Structural Welding","Custom Fabrication","Repairs","Ornamental Iron"]},{name:"Tree Service",tagline:"Expert arborists on call",services:["Tree Removal","Trimming","Stump Grinding","Emergency Service"]},{name:"Appliance Repair",tagline:"Get it running again",services:["Washer/Dryer","Refrigerator","Dishwasher","Oven Repair"]},{name:"Cleaning",tagline:"Spotless spaces guaranteed",services:["Deep Clean","Move In/Out","Office Cleaning","Regular Service"]}];let y="/",v="contractor",i=null,n={...P.contractor};const d=document.getElementById("previewFrame"),I=document.getElementById("layoutGrid"),l=document.getElementById("presetGrid"),E=document.getElementById("tradeGrid"),A=document.getElementById("generateBtn"),b=document.getElementById("configOutput"),C=document.getElementById("toggleWizard"),B=document.getElementById("wizardPanel"),k=document.getElementById("colorBg"),c=document.getElementById("colorDark"),L=document.getElementById("colorText"),D=document.getElementById("colorAccent"),M=document.getElementById("contrastHint");function T(e){const t=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`${t}, ${a}, ${o}`}function p(e,t){let a=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return a=Math.max(0,Math.round(a*(1-t/100))),o=Math.max(0,Math.round(o*(1-t/100))),r=Math.max(0,Math.round(r*(1-t/100))),`#${a.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}function z(e,t){let a=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return a=Math.min(255,Math.round(a+(255-a)*t/100)),o=Math.min(255,Math.round(o+(255-o)*t/100)),r=Math.min(255,Math.round(r+(255-r)*t/100)),`#${a.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}function W(e){const t=parseInt(e.slice(1,3),16)/255,a=parseInt(e.slice(3,5),16)/255,o=parseInt(e.slice(5,7),16)/255,r=s=>s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return .2126*r(t)+.7152*r(a)+.0722*r(o)}function q(e){return W(e)<.4}let R=null;function m(){clearTimeout(R),R=setTimeout(()=>{try{const e=d.contentWindow.document.documentElement;e.style.setProperty("--bg-main",n.bg),e.style.setProperty("--dark",n.dark),e.style.setProperty("--section-head",n.section),e.style.setProperty("--text",n.text),e.style.setProperty("--accent",n.accent),e.style.setProperty("--bg-alt",p(n.bg,5)),e.style.setProperty("--accent-hover",p(n.accent,10)),e.style.setProperty("--text-light",z(n.text,30)),e.style.setProperty("--border",p(n.bg,15)),e.style.setProperty("--accent-rgb",T(n.accent));const t=q(n.dark),a=t?"#ffffff":"#1a1a1a";e.style.setProperty("--nav-text",a),M.textContent=`Nav text: ${t?"light":"dark"}`}catch{}},30)}function g(e){try{const t=d.contentWindow.document,o=document.getElementById("bizName").value||e.name,r=t.querySelector(".hero-content h1.slogan, .hero-overlay h1");r&&(r.textContent=o.toUpperCase());const F=document.getElementById("bizSlogan").value||e.tagline,f=t.querySelector(".hero-content p, .hero-overlay p");f&&(f.textContent=F);const u=t.querySelectorAll(".service-card h3, .service-item h3");u.length>=4&&e.services.forEach((w,S)=>{u[S]&&(u[S].textContent=w)})}catch{}}document.getElementById("bizName").addEventListener("input",()=>{i&&g(i)});document.getElementById("bizSlogan").addEventListener("input",()=>{i&&g(i)});function N(){k.value=n.bg,c.value=n.dark,L.value=n.text,D.value=n.accent}x.forEach(e=>{const t=document.createElement("button");t.className="trade-btn",t.textContent=e.name,t.addEventListener("click",()=>{E.querySelectorAll(".trade-btn").forEach(a=>a.classList.remove("active")),t.classList.add("active"),i=e,g(e)}),E.appendChild(t)});I.querySelectorAll(".layout-card:not(.disabled)").forEach(e=>{e.addEventListener("click",()=>{I.querySelectorAll(".layout-card").forEach(t=>t.classList.remove("active")),e.classList.add("active"),y=e.dataset.layout,d.src=y})});d.addEventListener("load",()=>{m(),i&&setTimeout(()=>g(i),200)});l.querySelectorAll(".preset-card").forEach(e=>{e.addEventListener("click",()=>{l.querySelectorAll(".preset-card").forEach(t=>t.classList.remove("active")),e.classList.add("active"),v=e.dataset.preset,n={...P[v]},N(),m()})});function h(e,t){e.addEventListener("input",()=>{n[t]=e.value,l.querySelectorAll(".preset-card").forEach(a=>a.classList.remove("active")),m()})}h(k,"bg");c.addEventListener("input",()=>{n.dark=c.value,n.section=c.value,l.querySelectorAll(".preset-card").forEach(e=>e.classList.remove("active")),m()});h(L,"text");h(D,"accent");A.addEventListener("click",()=>{const e={layout:y==="/"?"layout-1":"layout-2",colors:{preset:v||"custom",bg_main:n.bg,dark:n.dark,section_head:n.section,text:n.text,accent:n.accent},trade:i?{name:i.name,tagline:i.tagline,services:i.services}:null,business:{name:document.getElementById("bizName").value||"",slogan:document.getElementById("bizSlogan").value||"",location:document.getElementById("bizLocation").value||"",phone:document.getElementById("bizPhone").value||""}};b.value=JSON.stringify(e,null,2),b.select()});C.addEventListener("click",()=>{B.classList.toggle("hidden"),C.textContent=B.classList.contains("hidden")?"Wizard":"Preview"});
