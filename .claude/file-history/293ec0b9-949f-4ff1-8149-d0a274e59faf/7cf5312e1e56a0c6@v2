# Claude Subagent System - Usage Guide

## Overview

This directory contains a comprehensive subagent system designed for:
- Autonomous project management with daily reporting
- Context preservation during long sessions
- Easy routing to specialized agents
- Accountability and task tracking

## Quick Start

### 1. Start a Session
```
Use the project-manager agent to initialize today's session
```

### 2. Route Tasks Automatically
```
Use the agent-router to determine the best agent for [your task]
```

Or invoke agents directly:
```
Use the code-reviewer agent to review my recent changes
Use the debugger agent to investigate [error message]
```

### 3. Maintain Context (Important!)
Every 15-20 interactions, or when context feels stale:
```
Use the context-keeper agent to refresh session state
```

### 4. End a Session
```
Use the project-manager agent to generate today's daily report
```

## Available Agents

### Project Management
| Agent | When to Use |
|-------|-------------|
| `project-manager` | Start/end of day, status updates, planning |
| `task-tracker` | Verify work is complete before marking done |
| `context-keeper` | Prevent context degradation in long sessions |

### Development
| Agent | When to Use |
|-------|-------------|
| `code-reviewer` | After writing/modifying code |
| `debugger` | Errors, test failures, unexpected behavior |
| `test-runner` | Run tests, check coverage |
| `refactorer` | Clean up code without changing behavior |

### Architecture & Design
| Agent | When to Use |
|-------|-------------|
| `architect` | Major design decisions, new features |
| `api-designer` | Creating or modifying APIs |
| `security-auditor` | Auth, user input, sensitive data handling |

### Operations
| Agent | When to Use |
|-------|-------------|
| `performance-optimizer` | Slow code, bottlenecks |
| `devops-engineer` | Docker, CI/CD, deployment |
| `git-specialist` | Complex git operations |

### Research & Documentation
| Agent | When to Use |
|-------|-------------|
| `researcher` | Investigate, explore, gather information |
| `doc-writer` | READMEs, API docs, comments |
| `data-analyst` | SQL queries, data exploration |

### Meta
| Agent | When to Use |
|-------|-------------|
| `agent-router` | Unsure which agent to use |

## Context Management Strategy

### Why Context Degrades
- Conversation grows long
- Many tool calls accumulate
- Focus shifts between topics
- Key details get buried

### How to Prevent Degradation

1. **Regular Refreshes**
   - Call `context-keeper` every 15-20 interactions
   - Call it when you notice repetition or confusion

2. **Use Subagents for Isolation**
   - Heavy operations run in subagent context
   - Results summarized back to main conversation
   - Keeps main context clean

3. **Session State File**
   - `.claude/context/session-state.md` stores key facts
   - Survives context compaction
   - Readable anchor for long sessions

4. **Daily Reports**
   - `.claude/reports/YYYY-MM-DD.md` captures each day
   - Provides continuity across sessions
   - Enables project hand-off

## File Structure

```
.claude/
├── agents/                    # Subagent definitions
│   ├── agent-router.md
│   ├── context-keeper.md
│   ├── project-manager.md
│   ├── task-tracker.md
│   ├── code-reviewer.md
│   ├── debugger.md
│   ├── test-runner.md
│   ├── doc-writer.md
│   ├── refactorer.md
│   ├── security-auditor.md
│   ├── architect.md
│   ├── api-designer.md
│   ├── performance-optimizer.md
│   ├── data-analyst.md
│   ├── devops-engineer.md
│   ├── git-specialist.md
│   └── researcher.md
├── context/
│   └── session-state.md       # Current session context
├── reports/
│   └── YYYY-MM-DD.md          # Daily reports (auto-generated)
├── agent-registry.md          # Index of all agents
├── project-status.md          # Project-level status
└── USAGE-GUIDE.md             # This file
```

## Creating New Agents

1. Create `.claude/agents/your-agent-name.md`
2. Add frontmatter:
   ```yaml
   ---
   name: your-agent-name
   description: When to use this agent. Use proactively for X.
   tools: Read, Write, Edit, Grep, Glob, Bash
   model: haiku | sonnet | opus
   ---
   ```
3. Write the system prompt with clear structure
4. Update `agent-registry.md`

## Model Selection

| Model | Cost | Speed | Use For |
|-------|------|-------|---------|
| haiku | Low | Fast | Verification, simple tasks, quick lookups |
| sonnet | Medium | Medium | Most development tasks |
| opus | High | Slow | Complex architecture, difficult reasoning |

## Best Practices

1. **Be Explicit** - Tell agents exactly what you want
2. **Verify Completion** - Use task-tracker before marking done
3. **Refresh Context** - Don't wait for degradation symptoms
4. **Check Reports** - Review daily reports for continuity
5. **Use Router When Unsure** - Let agent-router decide

## Troubleshooting

### Agent Not Being Invoked
- Check the `description` field matches your task
- Try explicit invocation: "Use the X agent to..."
- Verify agent file syntax is correct

### Context Feels Stale
- Run context-keeper immediately
- Review session-state.md
- Consider starting fresh session

### Daily Report Missing Info
- Invoke project-manager explicitly at end of session
- Check `.claude/reports/` for the file
